<h1>Gestión de Usuarios</h1>

{{!-- Listado de usuarios --}}
{{#if users.length}}
  <table border="1" cellpadding="8">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Apellido</th>
        <th>Email</th>
        <th>Rol</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      {{#each users}}
        <tr>
          <td>{{this.first_name}}</td>
          <td>{{this.last_name}}</td>
          <td>{{this.email}}</td>
          <td>{{this.role}}</td>
          <td>
            {{!-- Form eliminar --}}
            <form action="/api/users/{{this._id}}?_method=DELETE" method="post" style="display:inline;">
              <button type="submit">Eliminar</button>
            </form>

            {{!-- Form editar --}}
            <form action="/api/users/{{this._id}}?_method=PUT" method="post" style="display:inline;">
              <input type="text" name="first_name" placeholder="Nuevo nombre" required />
              <input type="text" name="last_name" placeholder="Nuevo apellido" required />
              <select name="role">
                <option value="user" {{#if (eq this.role "user")}}selected{{/if}}>Usuario</option>
                <option value="admin" {{#if (eq this.role "admin")}}selected{{/if}}>Administrador</option>
              </select>
              <button type="submit">Actualizar</button>
            </form>
          </td>
        </tr>
      {{/each}}
    </tbody>
  </table>
{{else}}
  <p>No hay usuarios registrados.</p>
{{/if}}

<hr>

{{!-- Formulario de creación --}}
<h2>Crear nuevo usuario</h2>
<form action="/api/users" method="post">
  <label for="first_name">Nombre:</label>
  <input type="text" id="first_name" name="first_name" required />
  <br/>

  <label for="last_name">Apellido:</label>
  <input type="text" id="last_name" name="last_name" required />
  <br/>

  <label for="email">Email:</label>
  <input type="email" id="email" name="email" required />
  <br/>

  <label for="password">Contraseña:</label>
  <input type="password" id="password" name="password" required />
  <br/>

  <label for="role">Rol:</label>
  <select id="role" name="role">
    <option value="user">Usuario</option>
    <option value="admin">Administrador</option>
  </select>
  <br/>

  <button type="submit">Crear</button>
</form>
